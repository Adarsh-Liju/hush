<div class="p-4 text-white">
    <h2 class="text-xl font-bold">SSH Terminal</h2>
    <p class="text-sm text-gray-400">
        Connected to {{.Host}}:{{.Port}} as {{.User}}
    </p>
</div>

<div
    id="terminal"
    class="flex-1 h-96 overflow-y-auto p-4 bg-black border border-green-500 rounded mx-4 mb-4 whitespace-pre-wrap"
    hx-ext="ws"
    ws-connect="/ws"
></div>

<form id="inputForm" class="flex gap-2 px-4 pb-4" onsubmit="sendInput(event)">
    <input
        id="cmd"
        type="text"
        autocomplete="off"
        placeholder="Type a command..."
        class="flex-1 p-2 bg-gray-900 border border-green-500 rounded focus:outline-none text-green-200"
    />
    <button
        type="submit"
        class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-500"
    >
        Send
    </button>
</form>

<script>
    const ws = new WebSocket("ws://" + location.host + "/ws");
    const term = document.getElementById("terminal");
    const input = document.getElementById("cmd");

    ws.onmessage = (e) => {
        term.textContent += e.data;
        term.scrollTop = term.scrollHeight;
    };

    function sendInput(e) {
        e.preventDefault();
        const val = input.value;
        if (val.trim() !== "") {
            ws.send(val + "\n");
            input.value = "";
        }
    }
</script>
